{% extends 'base.html' %}

{% block content %}
	<h4 class="mb-3">Пользователи</h4>
	<table class="table">
		<!-- Заголовок таблицы -->
		<thead>
			<tr>
				<th>№</th>
				<th>Фамилия</th>
				<th>Имя</th>
				<th>Отчество</th>
				<th>Логин</th>
				<th>Роль</th>
				<th>Действие</th>
			</tr>
		</thead>
		<tbody>
			{% for user in users_list %}
				<tr>
					<!-- loop.index просто создает итерацию 1,2,3,4... -->
					<td>{{ loop.index }}</td> 
					<!-- А далее просто берет элементы кортежа по списку -->
					<td>{{ user.last_name }}</td>
					<td>{{ user.first_name }}</td>
					<td>
						{% if user.middle_name %}
							{{ user.middle_name }}
						<!-- {# else #}
							— -->
							<!-- Можно сделать пустой строкой в таблице, для этого надо стереть всю конструкцию находящуюся в else  -->
						{% endif %}
					</td>
					<td>{{ user.login }}</td>
					<td>{{ user.role_name }}</td>
					<td>
						{% if current_user.is_authenticated %}
							<a class="btn btn-primary" href="{{ url_for('edit_user', user_id=user.id) }}">Редактировать</a>
						{% endif %}
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
	{% if current_user.is_authenticated %}
		<a href="{{ url_for('users_new') }}" class="btn btn-primary">Добавить пользователя</a>
	{% endif %}
{% endblock %}